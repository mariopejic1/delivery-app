<%- include("../partials/header") %>

<div class="container">
    <section class="card profile-card">
        <h2>Uredi profil</h2>

        <% if (locals.error) { %>
            <div style="color: red; margin-bottom: 10px;"><%= error %></div>
        <% } %>

        <form action="/users/profile/update" method="POST">
            <div class="form-group">
                <label>Ime:</label>
                <input type="text" name="name" value="<%= user.name %>" required>
            </div>

            <div class="form-group">
                <label>Email:</label>
                <input type="email" name="email" value="<%= user.email %>" required>
            </div>

            <div class="form-group">
                <label>Telefon:</label>
                <input type="text" name="phone" value="<%= user.phone || '' %>">
            </div>

            <% if (user.role === 'DOSTAVNA_SLUŽBA') { %>
                <div class="form-group" style="margin-top: 15px; padding: 10px; background: #f9f9f9; border: 1px solid #ddd;">
                    <label><strong>Cijena dostave (€):</strong></label>
                    <input type="number" name="deliveryPrice" step="0.01" 
                        value="<%= company ? company.deliveryPrice : '' %>" placeholder="Npr. 5.00">
                    <small style="color: #666; display: block;">Ova cijena će se automatski primjenjivati na nove pošiljke.</small>
                </div>
            <% } %>

            <div style="margin-top: 20px;">
                <button type="submit" class="btn btn-primary">Spremi promjene</button>
                <a href="/users/profile" class="btn btn-secondary">Odustani</a>
            </div>
        </form>
    </section>
</div>

<%- include("../partials/footer") %>