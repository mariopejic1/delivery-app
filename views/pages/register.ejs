<%- include("../partials/header") %>

<main class="main-content">
  <section class="auth-card card">
    <h2>Registracija</h2>
    
    <form action="/auth/register" method="POST" class="form">
      <div class="form-group">
        <input type="text" name="name" placeholder="Ime" required class="input">
      </div>
      
      <div class="form-group">
        <input type="email" name="email" placeholder="Email" required class="input">
      </div>
      
      <div class="form-group">
        <input type="password" name="password" placeholder="Lozinka" required class="input">
      </div>
      
      <div class="form-group">
        <input type="text" name="phone" placeholder="Telefon" class="input">
      </div>
      
      <div class="form-group">
        <label class="field-label">Tip računa:</label>
        <select name="role" id="roleSelect" class="input select-input" onchange="togglePriceInput()" required>
          <option value="KORISNIK">Korisnik</option>
          <option value="DOSTAVNA_SLUŽBA">Tvrtka (Dostavna služba)</option>
        </select>
      </div>

      <div id="priceField" class="price-container" style="display: none;">
        <label for="deliveryPrice" class="field-label">Cijena dostave (€):</label>
        <input type="number" 
               id="deliveryPrice" 
               name="deliveryPrice" 
               placeholder="Primjer: 5.00" 
               step="0.01" 
               min="0" 
               class="input">
        <small class="help-text">Ovaj iznos će se automatski naplaćivati korisnicima po pošiljci.</small>
      </div>

      <button type="submit" class="btn btn-primary w-100">Registriraj se</button>
    </form>
    
    <p class="auth-footer">Već imate račun? <a href="/auth/login">Prijavite se</a></p>
  </section>
</main>

<script>
  function togglePriceInput() {
    const roleSelect = document.getElementById('roleSelect');
    const priceField = document.getElementById('priceField');
    const priceInput = document.getElementById('deliveryPrice');

    if (roleSelect.value === 'DOSTAVNA_SLUŽBA') {
      priceField.style.display = 'block';
      priceInput.required = true;
    } else {
      priceField.style.display = 'none';
      priceInput.required = false;
      priceInput.value = '';
    }
  }
</script>

<style>
  .auth-card {
    max-width: 450px;
    margin: 40px auto;
    padding: 30px;
    background: #fff;
    border-radius: 12px;
    border: 1px solid #dbeafe;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }

  .auth-card h2 {
    text-align: center;
    margin-top: 0;
    margin-bottom: 1.5rem;
    color: #1e293b;
    font-weight: 800;
  }

  .form {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .form-group {
    width: 100%;
  }

  .field-label {
    display: block;
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 5px;
    color: #4a5568;
    text-align: left;
  }

  .input {
    width: 100%;            
    box-sizing: border-box;  
    padding: 12px;
    border: 1px solid #cbd5e1;
    border-radius: 8px;
    background: #f8fafc;
    display: block;          
  }

  .input:focus {
    outline: none;
    border-color: #3b82f6;
    background: #fff;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  .select-input {
    cursor: pointer;
    appearance: none; 
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%234a5568'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 16px;
  }

  .price-container {
    background: #f1f5f9;
    padding: 15px;
    border-radius: 8px;
    border: 1px dashed #cbd5e1;
    margin-top: 5px;
  }

  .help-text {
    display: block;
    margin-top: 8px;
    color: #718096;
    font-size: 0.75rem;
    line-height: 1.3;
  }

  .w-100 {
    width: 100%;
    margin-top: 10px;
  }

  .auth-footer {
    text-align: center;
    margin-top: 20px;
    font-size: 0.9rem;
    color: #718096;
  }

  .auth-footer a {
    font-weight: 600;
    color: #3b82f6;
  }
</style>

<%- include("../partials/footer") %>