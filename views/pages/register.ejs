<%- include("../partials/header") %>

<section class="auth-card card">
  <h2>Registracija</h2>
  <form action="/auth/register" method="POST" class="form">
    <input type="text" name="name" placeholder="Ime" required class="input">
    <input type="email" name="email" placeholder="Email" required class="input">
    <input type="password" name="password" placeholder="Lozinka" required class="input">
    <input type="text" name="phone" placeholder="Telefon" class="input">
    
    <select name="role" id="roleSelect" class="input" onchange="togglePriceInput()" required>
      <option value="KORISNIK">Korisnik</option>
      <option value="DOSTAVNA_SLUŽBA">Tvrtka</option>
    </select>

    <div id="priceField" style="display: none; margin-top: 10px;">
      <label for="deliveryPrice" style="font-size: 0.9em; color: #555;">Cijena dostave (€):</label>
      <input type="number" 
             id="deliveryPrice" 
             name="deliveryPrice" 
             placeholder="Primjer: 5.00" 
             step="0.01" 
             min="0" 
             class="input">
      <small style="color: #888;">Ovaj iznos će se automatski naplaćivati korisnicima po pošiljci.</small>
    </div>

    <button type="submit" class="btn btn-primary" style="margin-top: 15px;">Registriraj se</button>
  </form>
</section>

<script>
  function togglePriceInput() {
    const roleSelect = document.getElementById('roleSelect');
    const priceField = document.getElementById('priceField');
    const priceInput = document.getElementById('deliveryPrice');

    if (roleSelect.value === 'DOSTAVNA_SLUŽBA') {
      priceField.style.display = 'block';
      priceInput.required = true; // Postaje obavezno ako je tvrtka
    } else {
      priceField.style.display = 'none';
      priceInput.required = false;
      priceInput.value = ''; // Briše unos ako se korisnik predomisli
    }
  }
</script>

<style>
  .auth-card {
    max-width: 450px;
    margin: 40px auto;
    padding: 25px;
  }